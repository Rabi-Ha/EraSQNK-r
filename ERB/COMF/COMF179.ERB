@COM179
;수치플레이
CALL PRINT_TRAIN_NAME(SELECTCOM)

CALL TRAIN_MESSAGE_B

SIF REFUSE_CHECK()
	RETURN 0

STR:0 = %STR:2%

;鏡のセット
;終了時は修正なし
IF TEQUIP:수치플레이
	TEQUIP:수치플레이 = 0
	RETURN 1
ELSE
	TEQUIP:수치플레이 = 1
ENDIF

RETURN 1

@FLAG_COM179, ARG

@SOURCE_COM179, ARG
VARSET LOCAL

LOCAL:20 += 0
LOCAL:21 += 100

LOCAL:12 = 1000
LOCAL:14 = 500

;ABL:노출벽をみる
SELECTCASE ABL:노출벽
CASE 0
	LOCAL:13 += 600
	LOCAL:14 += 1000
	LOCAL:15 += 1000
CASE 1
	LOCAL:7 += 150
	LOCAL:13 += 500
	TIMES LOCAL:12, 1.50
CASE 2
	LOCAL:7 += 300
	LOCAL:13 += 400
	TIMES LOCAL:12, 2.00
CASE 3
	LOCAL:7 += 600
	LOCAL:13 += 300
	TIMES LOCAL:12, 3.00
CASE 4
	LOCAL:7 += 1000
	LOCAL:13 += 200
	TIMES LOCAL:12, 4.00
CASEELSE
	LOCAL:7 += 1800
	LOCAL:13 += 100
	TIMES LOCAL:12, 5.00
ENDSELECT
;ABL:마조끼をみる
SELECTCASE ABL:마조끼
CASE 0
CASE 1
	TIMES LOCAL:12 , 1.20
CASE 2
	TIMES LOCAL:12 , 1.40
CASE 3
	TIMES LOCAL:12 , 1.60
CASE 4
	TIMES LOCAL:12 , 1.80
CASEELSE
	TIMES LOCAL:12 , 2.00
ENDSELECT

;겁쟁이
SIF TALENT:겁쟁이
	TIMES LOCAL:14 , 1.50
;부끄럼쟁이
SIF TALENT:부끄럼쟁이
	TIMES LOCAL:14 , 3.00
;매력
IF TALENT:매력
	LOCAL:3 += 500
	LOCAL:16 += 500
	TIMES LOCAL:12 , 1.50
	TIMES LOCAL:14 , 1.20
ENDIF

LOCAL:16 += LOCAL:12 / 4
LOCAL:9 += LOCAL:14 / 2

CALL CALC, "조교소스", LOCAL:0, LOCAL:1, LOCAL:2, LOCAL:3, LOCAL:4, LOCAL:5, LOCAL:6, LOCAL:7, LOCAL:8, LOCAL:9, LOCAL:10, LOCAL:11, LOCAL:12, LOCAL:13, LOCAL:14, LOCAL:15, LOCAL:16, LOCAL:17, LOCAL:18, LOCAL:19, LOCAL:20, LOCAL:21, ARG


@TRAIN_MESSAGE_COM179
IF TEQUIP:수치플레이
	PRINTFORMW %조사처리(CALLNAME:TARGET,"를")% 데리고 거울 앞에서 떨어졌다…
ELSE
	PRINTFORMW %조사처리(CALLNAME:TARGET,"를")% 거울 앞에 데리고 갔다…
ENDIF


@EQUIP_COM57
SIF SELECTCOM == 179
	RETURN 0
;수치플레이
CALL SOURCE_COM179, 30

RETURN 1

@EQUIP_COM57_2
SIF SELECTCOM == 179
	RETURN 0
;수치플레이
PRINTL ＜수치플레이중＞

SIF ASSIPLAY == 0 && ABL:노출벽 >= 3
	TFLAG:30 += 1

RETURN 1
